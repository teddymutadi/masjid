<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Input Keuangan Masjid</title>
<style>
  body {
    background-color: #004d00; /* hijau tua */
    color: #000;
    font-family: Arial, sans-serif;
    display: flex;
    justify-content: center;
    padding: 20px;
  }
  .container {
    background-color: #90ee90; /* hijau muda */
    border-radius: 10px;
    padding: 20px;
    width: 100%;
    max-width: 400px;
    box-shadow: 0 0 10px rgba(0,0,0,0.3);
  }
  h2, h3 {
    text-align: center;
    margin: 0;
    color: #004d00;
  }
  label {
    display: block;
    margin-top: 12px;
    font-weight: bold;
    text-align: left;
  }
  input, textarea {
    width: 100%;
    padding: 8px;
    margin-top: 5px;
    border: 1px solid #ccc;
    border-radius: 5px;
    background: #fff;
  }
  textarea {
    height: 60px;
  }
  button {
    width: 100%;
    padding: 10px;
    background-color: #006400;
    color: white;
    border: none;
    border-radius: 5px;
    margin-top: 15px;
    font-size: 16px;
  }
  button:hover {
    background-color: #228B22;
  }
  .success {
    margin-top: 15px;
    text-align: center;
    font-weight: bold;
    color: green;
  }
  .hidden {
    display: none;
  }
</style>
</head>
<body>
  <div class="container">
    <!-- Halaman Login -->
    <div id="loginPage">
      <h2>LOGIN AKSES</h2>
      <h3>MASJID DAARUL MUTTAQIEN</h3>
      <label for="password">Masukkan Kode Akses:</label>
      <input type="password" id="password" placeholder="Masukkan kode akses">
      <button onclick="cekPassword()">MASUK</button>
      <div id="loginMsg" class="success"></div>
    </div>

    <!-- Halaman Form Input -->
    <div id="formPage" class="hidden">
      <h2>INPUT KEUANGAN PEMBANGUNAN</h2>
      <h3>MASJID DAARUL MUTTAQIEN CONGE KUDUS</h3>
      <form id="masjidForm">
        <label for="tanggal">Tanggal:</label>
        <input type="date" id="tanggal" name="tanggal" required>

        <label for="hari">Hari:</label>
        <input type="text" id="hari" name="hari" readonly>

        <label for="nama">Nama Penginput:</label>
        <input type="text" id="nama" name="nama">

        <label for="uangMasuk">Uang Masuk:</label>
        <input type="number" id="uangMasuk" name="uangMasuk">

        <label for="dari">Dari:</label>
        <input type="text" id="dari" name="dari">

        <label for="uangKeluar">Uang Keluar:</label>
        <input type="number" id="uangKeluar" name="uangKeluar">

        <label for="keperluan">Keperluan:</label>
        <input type="text" id="keperluan" name="keperluan">

        <label for="keterangan">Keterangan:</label>
        <textarea id="keterangan" name="keterangan"></textarea>

        <button type="submit">KIRIM</button>
      </form>
      <div id="pesan" class="success"></div>
    </div>
  </div>

  <script>
    // ===================
    // LOGIN SISTEM
    // ===================
    function cekPassword() {
      const pass = document.getElementById('password').value;
      const benar = "@conge2025"; // password disembunyikan di kode
      if (pass === benar) {
        document.getElementById('loginPage').classList.add('hidden');
        document.getElementById('formPage').classList.remove('hidden');
      } else {
        document.getElementById('loginMsg').innerText = "Kode akses salah!";
      }
    }

    // ===================
    // OTOMATIS ISI HARI
    // ===================
    document.getElementById('tanggal').addEventListener('change', function() {
      const date = new Date(this.value);
      const days = ['Minggu','Senin','Selasa','Rabu','Kamis','Jumat','Sabtu'];
      document.getElementById('hari').value = days[date.getDay()];
    });

    // ===================
    // KIRIM DATA KE GOOGLE SHEETS
    // ===================
    document.getElementById('masjidForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const form = e.target;
      const data = new FormData(form);
      const url = "https://script.google.com/macros/s/AKfycbz5rGs0BY8nRQs0vzqub1-KpNu2xgAb8EAWXOOxgrtMfwriiKbM17-MbHS8YqPLVnmM/exec"; // << Ganti di sini dengan URL hasil deploy

      fetch(url, { method: "POST", body: data })
        .then(response => response.text())
        .then(text => {
          document.getElementById('pesan').innerText = "Data sudah terekam ke Google Spreadsheet. Terima kasih semoga barokah.";
          form.reset();
        })
        .catch(error => {
          document.getElementById('pesan').innerText = "Terjadi kesalahan koneksi.";
        });
    });
  </script>
</body>
</html>
